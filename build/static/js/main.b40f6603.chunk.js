(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{58:function(e,a,t){e.exports=t(88)},64:function(e,a,t){},88:function(e,a,t){"use strict";t.r(a);t(59);var n=t(0),r=t.n(n),l=t(29),o=t.n(l),c=t(22),s=(t(64),t(5)),i=t(6),u=t(7),m=t(8),d=t(19),p=t(92),v=t(93),h=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"logOut",value:function(e){e.preventDefault(),localStorage.removeItem("usertoken"),this.props.history.push("/")}},{key:"render",value:function(){var e=r.a.createElement(p.a,null,r.a.createElement(p.a.Link,null,r.a.createElement(c.b,{to:"/login",className:"nav-link"},"Sign In")),r.a.createElement(p.a.Link,null,r.a.createElement(c.b,{to:"/register",className:"nav-link"},"Sign Up"))),a=r.a.createElement(p.a,null,r.a.createElement(p.a.Link,null,r.a.createElement("a",{href:"",onClick:this.logOut.bind(this),className:"nav-link"},"Logout")));return r.a.createElement(v.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(v.a.Brand,{href:"#home"},"Zero Trash"),r.a.createElement(v.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(v.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(p.a,{className:"mr-auto"}),localStorage.usertoken?a:e))}}]),t}(n.Component),E=Object(d.e)(h),g=t(18),f=t(38),b=t.n(f),y=function(e){return b.a.post("customers/register",{firstName:e.firstName,lastName:e.lastName,phoneNo:e.phoneNo,email:e.email,address1:e.address1,address2:e.address2,city:e.city,regDate:e.regDate,password:e.password,customerType:e.customerType,language:e.language}).then((function(e){return e.data})).catch((function(e){console.log(e)}))},S=function(e){var a=e.customer;e.rememberMe;return b.a.post("customers/login",{phoneNo:a.phoneNo,email:a.email,password:a.password}).then((function(e){return localStorage.setItem("usertoken",e.data.sessionToken),e.data})).catch((function(e){console.log(e)}))},C=function(e){var a={accessToken:"f83bdbecf8f2596cfd837b11ab2aa1fb",userToken:e.token,userTele:e.phoneNo};return fetch("http://collector.ceykod.com/api/v1/verifyToken/",{method:"POST",headers:{},body:JSON.stringify(a)}).then((function(e){return e.json()})).then((function(e){return console.log(e),e})).catch((function(e){console.log(e)}))},k=t(94),w=t(95),N=t(91),x=t(90),O=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={username:"",password:"",validInput:!0,validServer:!0,rememberMe:!1},e.handleChange=function(a){return function(t){e.setState(Object(g.a)({},a,t.target.value))}},e.continue=function(a){a.preventDefault();var t=e.state,n=t.username,r=t.password,l=t.rememberMe,o={};Number.isInteger(parseInt(n))?(console.log("Number is integer"),o={phoneNo:n,email:"null",password:r}):(console.log("Number is not integer"),o={phoneNo:"null",email:n,password:r}),S({customer:o,rememberMe:l}).then((function(a){if(a){var t=a.statusCode;console.log(t),"S2000"==t?(console.log("Success"),e.setState({validInput:!0,validServer:!0}),window.location.href="/"):"E4001"==t?(console.log("Wrong"),e.setState({validInput:!1,validServer:!0})):"E5000"!=t&&"E5003"!=t||(console.log("Error"),e.setState({validInput:!0,validServer:!1}))}else e.setState({validServer:!1})}))},e.radioButtonChange=function(a){console.log("Radio button Changed: "+a.target.checked),a.target.checked?e.setState({rememberMe:!0}):e.setState({rememberMe:!1})},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=r.a.createElement("div",{class:"alert alert-danger",role:"alert"},"Invalid mobile number or password!"),n=r.a.createElement(k.a,{variant:"danger"},"Database error!");return r.a.createElement(w.a,null,r.a.createElement(N.a,{onSubmit:function(a){return e.continue(a)}},r.a.createElement(w.a.Body,null,r.a.createElement(w.a.Title,{className:"text-center"},"Sign In"),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"Mobile number or Email"),r.a.createElement(N.a.Control,{type:"text",value:a.username,onChange:this.handleChange("username"),placeholder:"Enter mobile number or email",required:!0})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"Password"),r.a.createElement(N.a.Control,{type:"password",value:a.password,onChange:this.handleChange("password"),placeholder:"Enter password",required:!0})),r.a.createElement("br",null),a.validServer?a.validInput?null:t:n,r.a.createElement(x.a,{variant:"success",type:"submit",block:!0},"Continue"),r.a.createElement(w.a.Text,null,"forgot\u2002",r.a.createElement("a",{href:"#"},"password?")),r.a.createElement(w.a.Text,null,"new to Zero Trash?\u2002",r.a.createElement("a",{href:"/register"},"Register Here!")))))}}]),t}(n.Component),j=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={validEmail:!0,validPhoneNo:!0},e.continue=function(a){a.preventDefault();var t=e.props.values,n=t.phoneNo,r=t.email,l=!0;e.validatePhoneNo(n)?e.setState({validPhoneNo:!0}):(e.setState({validPhoneNo:!1}),l=!1),e.validateEmail(r)?e.setState({validEmail:!0}):(e.setState({validEmail:!1}),l=!1),l&&e.props.nextStep()},e.back=function(a){a.preventDefault(),e.props.prevStep()},e}return Object(i.a)(t,[{key:"validatePhoneNo",value:function(e){return!!e.match(/^07\d{8}$/)}},{key:"validateEmail",value:function(e){return!!e.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)}},{key:"render",value:function(){var e=this,a=this.props,t=a.values,n=a.handleChange,l=this.state,o=l.validEmail,c=l.validPhoneNo,s=r.a.createElement(N.a.Text,{className:"text-muted text-alert"},"Invalid phone No"),i=r.a.createElement(N.a.Text,{className:"text-muted text-alert"},"Invalid email address");return r.a.createElement(w.a,null,r.a.createElement(N.a,{onSubmit:function(a){return e.continue(a)}},r.a.createElement(w.a.Body,null,r.a.createElement(w.a.Title,{className:"text-center"},"Sign Up"),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"First Name"),r.a.createElement(N.a.Control,{type:"text",value:t.firstName,onChange:n("firstName"),placeholder:"Enter first name",required:!0})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"Last Name"),r.a.createElement(N.a.Control,{type:"text",value:t.lastName,onChange:n("lastName"),placeholder:"Enter last name",required:!0})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"Mobile Number"),r.a.createElement(N.a.Control,{type:"text",className:c?null:"is-invalid",value:t.phoneNo,onChange:n("phoneNo"),placeholder:"Enter mobile number",required:!0}),c?null:s),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"Email"),r.a.createElement(N.a.Control,{type:"text",className:o?null:"is-invalid",value:t.email,onChange:n("email"),placeholder:"Enter email",required:!0}),o?null:i),r.a.createElement("br",null),r.a.createElement(x.a,{variant:"success",type:"submit",block:!0},"Continue"),r.a.createElement(x.a,{variant:"light",onClick:this.back,block:!0},"Back"),r.a.createElement(w.a.Text,null,"Already have an account?\u2002",r.a.createElement("a",{href:"#"},"Login Here!")))))}}]),t}(n.Component),T=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={validPassword:!0,validConfirmPassword:!0},e.continue=function(a){a.preventDefault();var t=e.props.values,n=t.password,r=t.confirmPassword,l=!0;e.validatePassword(n)?e.setState({validPassword:!0}):(e.setState({validPassword:!1}),l=!1),n!=r?(e.setState({validConfirmPassword:!1}),l=!1):e.setState({validConfirmPassword:!0}),l&&e.props.nextStep()},e.back=function(a){a.preventDefault(),e.props.prevStep()},e}return Object(i.a)(t,[{key:"validatePassword",value:function(e){return e.match(/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{7,15}$/)?(console.log("Correct"+e),!0):(console.log("Incorrect"+e),!1)}},{key:"render",value:function(){var e=this,a=this.props,t=a.values,n=a.handleChange,l=this.state,o=l.validPassword,c=l.validConfirmPassword,s=r.a.createElement(N.a.Text,{className:"text-muted text-alert"},"Password must contain 7 to 15 characters including atleast 1 numeric character and atleast 1 special character."),i=r.a.createElement(N.a.Text,{className:"text-muted text-alert"},"Passwords do not match.");return r.a.createElement(w.a,null,r.a.createElement(N.a,{onSubmit:function(a){return e.continue(a)}},r.a.createElement(w.a.Body,null,r.a.createElement(w.a.Title,{className:"text-center"},"Sign Up"),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"Password"),r.a.createElement(N.a.Control,{type:"password",className:o?null:"is-invalid",value:t.password,onChange:n("password"),placeholder:"Enter Password",required:!0}),o?null:s),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"Confirm Password"),r.a.createElement(N.a.Control,{type:"password",className:o?null:"is-invalid",value:t.confirmPassword,onChange:n("confirmPassword"),placeholder:"Confirm Password",required:!0}),c?null:i),r.a.createElement("br",null),r.a.createElement(x.a,{variant:"success",type:"submit",block:!0},"Continue"),r.a.createElement(x.a,{variant:"light",onClick:this.back,block:!0},"Back"),r.a.createElement(w.a.Text,null,"Already have an account?\u2002",r.a.createElement("a",{href:"#"},"Login Here!")))))}}]),t}(n.Component),P=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).continue=function(a){a.preventDefault(),e.props.nextStep()},e.back=function(a){a.preventDefault(),e.props.prevStep()},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.props,t=a.values,n=a.handleChange;return r.a.createElement(w.a,null,r.a.createElement(N.a,{onSubmit:function(a){return e.continue(a)}},r.a.createElement(w.a.Body,null,r.a.createElement(w.a.Title,{className:"text-center"},"Sign Up"),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"Address 1"),r.a.createElement(N.a.Control,{type:"text",value:t.address1,onChange:n("address1"),placeholder:"address 1",required:!0})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"Address 2"),r.a.createElement(N.a.Control,{type:"text",value:t.address2,onChange:n("address2"),placeholder:"address 2",required:!0})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"City"),r.a.createElement(N.a.Control,{type:"text",value:t.city,onChange:n("city"),placeholder:"City",required:!0})),r.a.createElement("br",null),r.a.createElement(x.a,{variant:"success",type:"submit",block:!0},"Continue"),r.a.createElement(x.a,{variant:"light",onClick:this.back,block:!0},"Back"),r.a.createElement(w.a.Text,null,"Already have an account?\u2002",r.a.createElement("a",{href:"#"},"Login Here!")))))}}]),t}(n.Component),D=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={validServer:!0,validInput:!0},e.continue=function(a){a.preventDefault();var t=e.props.values,n=t.firstName,r=t.lastName,l=t.phoneNo,o=t.email,c=t.customerType,s=t.password,i=t.address1,u=t.address2,m=t.city,d=t.regDate,p=t.language;console.log(e.props.values);var v={firstName:n,lastName:r,phoneNo:l,email:o,customerType:c,password:s,address1:i,address2:u,city:m,regDate:d,language:p};console.log(v),y(v).then((function(a){if(a){var t=a.statusCode;console.log(t),"S2000"==t?(console.log("Success"),e.setState({validInput:!0,validServer:!0}),window.location.href="/login"):"E4001"==t?(console.log("Wrong"),e.setState({validInput:!1,validServer:!0})):"E5000"==t&&(console.log("Error"),e.setState({validInput:!0,validServer:!1}))}else e.setState({validServer:!1})}))},e.back=function(a){a.preventDefault(),e.props.prevStep()},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=r.a.createElement(k.a,{variant:"danger"},"A user with these account details already exists!"),t=r.a.createElement(k.a,{variant:"danger"},"Database error!"),n=this.props.values,l=n.firstName,o=n.lastName,c=n.phoneNo,s=n.email,i=n.address1,u=n.address2,m=n.city,d=this.state,p=d.validInput,v=d.validServer;return r.a.createElement(w.a,null,r.a.createElement(N.a,{onSubmit:function(a){return e.continue(a)}},r.a.createElement(w.a.Body,null,r.a.createElement(w.a.Title,{className:"text-center"},"Confirm Information"),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"Name"),r.a.createElement(N.a.Control,{type:"text",value:l+" "+o,readOnly:!0})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"Email"),r.a.createElement(N.a.Control,{type:"text",value:s,readOnly:!0})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"Mobile Number"),r.a.createElement(N.a.Control,{type:"text",value:c,readOnly:!0})),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"Address"),r.a.createElement(N.a.Control,{type:"text",value:i+", "+u+", "+m,readOnly:!0})),r.a.createElement("br",null),v?p?null:a:t,r.a.createElement(x.a,{variant:"success",type:"submit",block:!0},"Confirm & Submit"),r.a.createElement(x.a,{variant:"light",onClick:this.back,block:!0},"Back"),r.a.createElement(w.a.Text,null,"Already have an account?\u2002",r.a.createElement("a",{href:"#"},"Login Here!")))))}}]),t}(n.Component),I=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"continue",value:function(e){e.preventDefault(),this.props.nextStep()}},{key:"render",value:function(){var e=this,a=this.props.handleChange;return r.a.createElement(w.a,null,r.a.createElement(N.a,{onSubmit:function(a){return e.continue(a)}},r.a.createElement(w.a.Body,null,r.a.createElement(w.a.Title,{className:"text-center"},"Choose Your Language"),r.a.createElement("br",null),r.a.createElement("div",Object(g.a)({className:"mb-3"},"className","btn-block-language"),r.a.createElement(x.a,{type:"submit",value:"sinhala",variant:"success",size:"lg",onClick:a("language")},"Sinhala"),r.a.createElement(x.a,{type:"submit",value:"english",variant:"success",size:"lg",onClick:a("language")},"English")))))}}]),t}(n.Component),L=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={token:"",validInput:!0,validToken:!0},e.handleChange=function(a){return function(t){e.setState(Object(g.a)({},a,t.target.value))}},e.continue=function(a){a.preventDefault();var t={token:e.state.token,phoneNo:e.props.values.phoneNo};C(t).then((function(a){if(a){console.log(a.statusCode);var t=a.statusCode;"S1000"==t?(e.setState({validToken:!0,validInput:!0}),e.props.nextStep()):"E3002"==t?e.setState({validToken:!1,validInput:!0}):e.setState({validToken:!0,validInput:!1})}else e.setState({validInput:!1})}))},e.back=function(a){a.preventDefault(),e.props.prevStep()},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.validInput,n=a.validToken,l=r.a.createElement(k.a,{variant:"danger"},"Server Error. Please try again later!"),o=r.a.createElement(k.a,{variant:"danger"},"Incorrect verification code!");return r.a.createElement(w.a,null,r.a.createElement(N.a,{onSubmit:function(a){return e.continue(a)}},r.a.createElement(w.a.Body,null,r.a.createElement(w.a.Title,{className:"text-center"},"Mobile number verification"),r.a.createElement(N.a.Group,null,r.a.createElement(N.a.Label,null,"Device Verification Code"),r.a.createElement(N.a.Control,{type:"text",placeholder:"",value:this.state.token,onChange:this.handleChange("token"),required:!0}),r.a.createElement(N.a.Text,{className:"text-muted"},"Do not share this code with anyone else")),r.a.createElement("br",null),r.a.createElement(w.a.Text,null,"The device verification code has been sent to you when you registered your mobile number using ssd."),t?n?null:o:l,r.a.createElement(x.a,{variant:"success",type:"submit",block:!0},"Verify & Continue"),r.a.createElement(x.a,{variant:"light",onClick:this.back,block:!0},"Back"))))}}]),t}(n.Component),A=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={step:1,language:"",customerType:"Regular Customer",firstName:"",lastName:"",phoneNo:"",email:"",password:"",confirmPassword:"",address1:"",address2:"",city:"",regDate:e.formatDate((new Date).toLocaleString())},e.nextStep=function(){var a=e.state.step;e.setState({step:a+1})},e.prevStep=function(){var a=e.state.step;e.setState({step:a-1})},e.handleChange=function(a){return function(t){e.setState(Object(g.a)({},a,t.target.value))}},e}return Object(i.a)(t,[{key:"formatDate",value:function(e){var a=new Date(e),t=""+(a.getMonth()+1),n=""+a.getDate(),r=a.getFullYear();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),[r,t,n].join("-")}},{key:"render",value:function(){var e=this.state.step,a=this.state,t={firstName:a.firstName,lastName:a.lastName,email:a.email,phoneNo:a.phoneNo,password:a.password,confirmPassword:a.confirmPassword,address1:a.address1,address2:a.address2,city:a.city,regDate:a.regDate,customerType:a.customerType,language:a.language};switch(e){case 1:return r.a.createElement(I,{nextStep:this.nextStep,handleChange:this.handleChange});case 2:return r.a.createElement(j,{nextStep:this.nextStep,prevStep:this.prevStep,handleChange:this.handleChange,values:t});case 3:return r.a.createElement(L,{nextStep:this.nextStep,prevStep:this.prevStep,handleChange:this.handleChange,values:t});case 4:return r.a.createElement(T,{nextStep:this.nextStep,prevStep:this.prevStep,handleChange:this.handleChange,values:t});case 5:return r.a.createElement(P,{nextStep:this.nextStep,prevStep:this.prevStep,handleChange:this.handleChange,values:t});case 6:return r.a.createElement(D,{nextStep:this.nextStep,prevStep:this.prevStep,values:t})}}}]),t}(n.Component),B=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=a.call.apply(a,[this].concat(r))).state={},e}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null)}}]),t}(n.Component),G=function(e){Object(m.a)(t,e);var a=Object(u.a)(t);function t(){return Object(s.a)(this,t),a.apply(this,arguments)}return Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(c.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(E,null),r.a.createElement(d.a,{exact:!0,path:"/",component:B}),r.a.createElement("div",{className:"container"},r.a.createElement(d.a,{exact:!0,path:"/register",component:A}),r.a.createElement(d.a,{exact:!0,path:"/login",component:O}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(c.a,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[58,1,2]]]);
//# sourceMappingURL=main.b40f6603.chunk.js.map